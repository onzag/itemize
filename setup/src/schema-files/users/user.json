{
    "type": "item",
    "properties": [
        {
            "id": "username",
            "type": "string",
            "subtype": "identifier",
            "unique": true,
            "nonCaseSensitiveUnique": true,
            "htmlAutocomplete": "username"
        },
        {
            "id": "app_language",
            "type": "string",
            "hidden": true,
            "searchable": false
        },
        {
            "id": "app_country",
            "type": "string",
            "hidden": true,
            "searchable": false
        },
        {
            "id": "app_currency",
            "type": "string",
            "hidden": true,
            "searchable": false
        },
        {
            "id": "email",
            "type": "string",
            "subtype": "email",
            "searchable": false,
            "nullable": true,
            "readRoleAccess": "$CONFIG:if(config.roles.includes('ADMIN')){return ['&OWNER', 'ADMIN']}else{return ['&GUEST']}",
            "editRoleAccess": "$CONFIG:if(config.roles.includes('ADMIN')){return ['&OWNER', 'ADMIN']}else{return ['&GUEST']}"
        },
        {
            "id": "e_validated",
            "type": "boolean",
            "nullable": true,
            "default": false,
            "searchable": false,
            "createRoleAccess": "$CONFIG:if(config.roles.includes('ADMIN')){return ['ADMIN']}else{return []}",
            "editRoleAccess": "$CONFIG:if(config.roles.includes('ADMIN')){return ['ADMIN']}else{return []}",
            "coerceNullsIntoDefault": true
        },
        {
            "id": "e_notifications",
            "type": "boolean",
            "default": true,
            "searchable": false,
            "readRoleAccess": ["&OWNER"],
            "editRoleAccess": ["&OWNER", "ADMIN"]
        },
        {
            "id": "e_newsletter",
            "type": "boolean",
            "default": true,
            "searchable": false,
            "readRoleAccess": ["&OWNER"],
            "editRoleAccess": ["&OWNER", "ADMIN"]
        },
        {
            "id": "password",
            "type": "password",
            "htmlAutocomplete": "current-password",
            "disableRetrieval": true,
            "readRoleAccess": [],
            "editRoleAccess": ["&OWNER", "ADMIN"]
        },
        {
            "id": "role",
            "type": "string",
            "values": "$CONFIG:return config.roles;",
            "nullable": true,
            "default": "USER",
            "editRoleAccess": ["ADMIN"],
            "createRoleAccess": ["ADMIN"],
            "coerceNullsIntoDefault": true
        },
        {
            "id": "profile_picture",
            "type": "file",
            "specialProperties": {
                "imageUploader": true,
                "dimensions": "24 24x24 ; 48 48x48",
                "smallDimension": "96x96",
                "mediumDimension": "128x128",
                "largeDimension": "256x256"
            },
            "nullable": true,
            "editRoleAccess": "$CONFIG:if(config.roles.includes('ADMIN')){return ['&OWNER', 'ADMIN']}else{return ['&GUEST']}"
        },
        {
            "id": "address",
            "type": "location",
            "nullable": true,
            "readRoleAccess": ["&OWNER"],
            "searchable": false
        },
        {
            "id": "about_me",
            "type": "text",
            "nullable": true,
            "searchable": false
        },
        {
            "id": "session_id",
            "type": "integer",
            "disableRetrieval": true,
            "searchable": false,
            "default": 0,
            "hidden": true
        }
    ],
    "policies": {
        "edit": {
            "REQUIRES_PASSWORD_CONFIRMATION": {
                "roles": "$CONFIG:return config.roles.filter((r) => r !== 'ADMIN');",
                "properties": ["password"],
                "applyingProperties": ["username", "password"]
            }
        },
        "delete": {
            "REQUIRES_PASSWORD_CONFIRMATION": {
                "roles": "$CONFIG:return config.roles.filter((r) => r !== 'ADMIN');",
                "properties": ["password"]
            }
        }
    },
    "createRoleAccess": "$CONFIG:if(config.roles.includes('ADMIN')){return ['&GUEST', 'ADMIN']}else{return ['&GUEST']}",
    "ownerIsObjectId": true
}